<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenkai Adventure</title>
    <style>
        body {
            background-color: #2e2638;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 30px;
        }
        h1 {
            color: #ffbb00;
            font-size: 36px;
        }
        select, button {
            padding: 10px;
            margin: 10px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
        }
        select {
            background-color: #4a3f5f;
            color: white;
        }
        button {
            background-color: #ff6600;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #cc5200;
        }
        .section {
            margin-top: 30px;
            border: 2px solid #ffbb00;
            border-radius: 12px;
            padding: 20px;
            background-color: #3a3149;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 100px);
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }
        .cell {
            border: 2px solid #ffbb00;
            border-radius: 8px;
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #5a4e6b;
            font-size: 18px;
        }
        .zenkai-grid {
            display: grid;
            gap: 10px;
            justify-content: center;
        }
        .zenkai-item {
            margin: 0;
            padding: 8px 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }


    </style>
</head>
<body>
    <h1>‚ö° Zenkai Adventure ‚ö°</h1>

    <label for="players">N√∫mero de jogadores:</label>
    <select id="players">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
    </select>
    <br>
    <button onclick="gerarPartida()">Monte uma partida!</button>

    <div id="resultado"></div>

    <script>
        const coresViloes = ['Azul', 'Vermelho', 'Amarelo', 'Verde'];
        const generos = ['Mulher', 'Homem'];
        const direcoes = ['Norte', 'Oeste', 'Sul', 'Leste'];
    
        function sortearViloes() {
            const coresDisponiveis = shuffle(coresViloes).slice(0, 2);
            const viloes = coresDisponiveis.map(cor => {
                const genero = generos[Math.floor(Math.random() * generos.length)];
                const letra = ['A', 'B', 'C', 'D'][Math.floor(Math.random() * 4)];
                const numero = Math.floor(Math.random() * 8) + 1;
                const direcao = direcoes[Math.floor(Math.random() * 4)];
                return { cor, genero, letra, numero, direcao };
            });
            return viloes;
        }
    
        function renderizarViloes(viloes) {
            const container = document.getElementById('viloes');
            container.innerHTML = '';
            viloes.forEach((v, i) => {
                const div = document.createElement('div');
                div.className = 'zenkai-item';
                div.style.backgroundColor = v.cor === 'Azul' ? '#007bff'
                    : v.cor === 'Vermelho' ? '#dc3545'
                    : v.cor === 'Amarelo' ? '#ffc107'
                    : '#28a745';
                div.style.color = (v.cor === 'Amarelo') ? '#000' : '#fff';
                div.innerHTML = `Vil√£o ${i + 1}: ${v.genero} ${v.cor} - Mapa ${v.letra}, Pos. ${v.numero}, ${v.direcao}`;
                container.appendChild(div);
            });
        }
        
        const habitats = {
            "Glacial": ["Kimeow", "Digarp", "Haati"],
            "Urbano": ["Lunna", "Pitixa", "Marleon"],
            "Aqu√°tico": ["Luppy", "Allipop", "Flashin", "Zigafe"],
            "Campina": ["Pankidy", "Mohra", "Ironpup", "Pigroot", "Burrny"],
            "Floresta": ["Oikid", "Piri-piri", "Gamboop", "Guatat√°", "Oranboo", "Plumixie"],
            "Montanha": ["Coldeep", "Roclimb", "Rokkar", "Rabblaze", "Fluffy"]
        };

        const habitatColors = {
            "Glacial": "#19b1b1",       // light blue
            "Urbano": "#909090",         // gray
            "Aqu√°tico": "#1d09ea",       // blue
            "Campina": "#0fa619",        // light green
            "Floresta": "#016805",       // dark green
            "Montanha": "#cf510d"        // reddish brown
        };

        function gerarPartida() {
            const numJogadores = parseInt(document.getElementById('players').value);
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.innerHTML = '';

            // 1. OBJETIVOS
            const objetivos = sortearObjetivos(numJogadores);
            const objetivosDiv = document.createElement('div');
            objetivosDiv.className = 'section';
            objetivosDiv.innerHTML = `<h2>üéØ Objetivos</h2><p>${formatarObjetivos(objetivos)}</p>`;
            resultadoDiv.appendChild(objetivosDiv);

            // 2. MAPA
            const mapa = gerarMapa();
            const mapaDiv = document.createElement('div');
            mapaDiv.className = 'section';
            mapaDiv.innerHTML = `<h2>üó∫Ô∏è Mapa</h2>`;
            const grid = document.createElement('div');
            grid.className = 'grid';

            mapa.forEach(cel => {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.style.backgroundColor = cel.cor === 'Roxo' ? '#9455fe' : '#f68d2e';
                cell.innerHTML = `<strong>${cel.letra}</strong><br>${cel.tipo} ${cel.numero}`;
                grid.appendChild(cell);
            });

            mapaDiv.appendChild(grid);
            resultadoDiv.appendChild(mapaDiv);

            // 3. VIL√ïES
            const viloes = sortearViloes();
            const viloesDiv = document.createElement('div');
            viloesDiv.className = 'section';
            viloesDiv.innerHTML = `<h2>ü¶π Vil√µes</h2>`;
            
            const container = document.createElement('div');
            container.className = 'zenkai-grid';
            container.id = 'viloes';
            
            viloes.forEach((v, i) => {
                const div = document.createElement('div');
                div.className = 'zenkai-item';
                div.style.backgroundColor = v.cor === 'Azul' ? '#007bff'
                    : v.cor === 'Vermelho' ? '#dc3545'
                    : v.cor === 'Amarelo' ? '#ffc107'
                    : '#28a745';
                div.style.color = (v.cor === 'Amarelo') ? '#000' : '#fff';
                div.innerHTML = `${v.genero} - ${v.cor} - ${v.letra} ${v.numero} ${v.direcao}`;
                container.appendChild(div);
            });
            
            viloesDiv.appendChild(container);
            resultadoDiv.appendChild(viloesDiv);


            // 4. ZENKAIS
            const zenkais = sortearZenkai(numJogadores);
            const zenkaiDiv = document.createElement('div');
            zenkaiDiv.className = 'section';
            zenkaiDiv.innerHTML = `<h2>üê¶‚Äçüî• Zenkais Iniciais</h2>`;

            const zenkaiGrid = document.createElement('div');
            zenkaiGrid.className = 'zenkai-grid';
            
            // Define grid layout
            if (numJogadores === 1) zenkaiGrid.style.gridTemplateColumns = '1fr';
            else if (numJogadores === 2) zenkaiGrid.style.gridTemplateColumns = '1fr 1fr';
            else if (numJogadores === 3) zenkaiGrid.style.gridTemplateColumns = '1fr 1fr 1fr';
            else if (numJogadores === 4) zenkaiGrid.style.gridTemplateColumns = '1fr 1fr';
            else if (numJogadores === 5) zenkaiGrid.style.gridTemplateColumns = '1fr 1fr 1fr';
            else if (numJogadores === 6) zenkaiGrid.style.gridTemplateColumns = '1fr 1fr 1fr';
            
            zenkais.forEach((z, i) => {
                const item = document.createElement('div');
                item.className = 'zenkai-item';
                item.style.backgroundColor = habitatColors[z.habitat];
                item.innerHTML = `P${i + 1}: ${z.emoji} <strong>${z.nome}</strong>`;
                zenkaiGrid.appendChild(item);
            });
            
            zenkaiDiv.appendChild(zenkaiGrid);

            resultadoDiv.appendChild(zenkaiDiv);
        }

        function sortearObjetivos(numJogadores) {
            const total = numJogadores === 1 ? 3 : numJogadores + 1;
            let vermelho = 1, azul = 1, roxo = 1;
            while (vermelho + azul + roxo < total) {
                const sorteio = Math.floor(Math.random() * 3);
                if (sorteio === 0) vermelho++;
                if (sorteio === 1) azul++;
                if (sorteio === 2) roxo++;
            }
            return { vermelho, azul, roxo };
        }

        function formatarObjetivos(obj) {
            return `${obj.vermelho} üî¥, ${obj.azul} üîµ, ${obj.roxo} üü£`;
        }

        function gerarMapa() {
            const letras = shuffle(['A', 'B', 'C', 'D']);
            const cores = Math.random() < 0.5 ? ['Roxo', 'Laranja'] : ['Laranja', 'Roxo'];
            const mapa = [
                { letra: letras[0], cor: cores[0] },
                { letra: letras[1], cor: cores[1] },
                { letra: letras[2], cor: cores[1] },
                { letra: letras[3], cor: cores[0] },
            ];
        
            // Sortear cavernas e saf√°ris
            const cavernas = shuffle([mapa[0], mapa[3]]);
            cavernas[0].tipo = '‚ùÑÔ∏è';
            cavernas[1].tipo = '‚ùÑÔ∏è';
        
            mapa.forEach(m => {
                if (!m.tipo) m.tipo = 'üêæ';
                m.numero = Math.floor(Math.random() * 8) + 1; // n√∫mero entre 1 e 8
            });
        
            return mapa;
        }

        function sortearZenkai(numJogadores) {
            const todos = [];
            for (const [habitat, criaturas] of Object.entries(habitats)) {
                criaturas.forEach(c => {
                    const emoji = getEmojiHabitat(habitat);
                    todos.push({ nome: c, habitat: habitat, emoji: emoji });
                });
            }
            const sorteados = shuffle(todos).slice(0, numJogadores);
            return sorteados;
        }

        function getEmojiHabitat(h) {
            if (h === 'Glacial') return '‚ùÑÔ∏è';
            if (h === 'Urbano') return 'üè¢';
            if (h === 'Aqu√°tico') return 'üåä';
            if (h === 'Campina') return 'üå±';
            if (h === 'Floresta') return 'üå≤';
            if (h === 'Montanha') return 'üèîÔ∏è';
            return '';
        }

        function shuffle(array) {
            let a = array.slice();
            for (let i = a.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }
    </script>
</body>
</html>
